package tritium;

message Script {
	optional string name = 1 [default='main'];
	optional Instruction root = 2;
	optional bool has_imports = 3;
	
	message Instruction {
		optional string name = 1;
		repeated Instruction children = 2;
		repeated Instruction arguments = 3;
		enum Type {
			BLOCK = 0;
			INVOCATION = 1;
			IMPORT = 2;
			STRING = 3;
			REGEXP = 4;
		}
		required Type type = 4;
		optional int32 line_number = 5;
		optional string filename = 6;
		
		optional Function invocation_name = 7;
		enum Function {
			VAR = 0;
			SET = 1;
			REMOVE = 2;
			SELECT = 3;
			CONCAT = 4;
			APPEND = 5;
			PREPEND = 6;
			MATCH = 7;
			WITH = 8;
			NOT = 9;
			MOVE = 10;
			DUP = 11;
			INDEX = 12;
			NODE = 13;
			ATTRIBUTE = 14;
			VALUE = 15;
			NAME = 16;
			REPLACE = 17;
		}
		
		optional Position position = 8;
		enum Position {
			BEFORE = 0;
			AFTER = 1;
			TOP = 2;
			BOTTOM = 3;
		}
	}
}

